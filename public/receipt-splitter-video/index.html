<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Receipt Splitter - Typography Video</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0a0a0a;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Inter', -apple-system, sans-serif;
      font-weight: 200;
      overflow: hidden;
    }

    .container {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px;
      position: relative;
    }

    .line {
      font-size: clamp(28px, 5vw, 52px);
      color: #e8e4df;
      letter-spacing: -0.02em;
      line-height: 1.4;
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
      margin: 8px 0;
    }

    .line.visible {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .word {
      display: inline-block;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.4s ease-out, transform 0.4s ease-out;
    }

    .word.typed {
      opacity: 1;
      transform: translateY(0);
    }

    .highlight {
      color: #c4b5a4;
    }

    .accent {
      color: #9a8b7a;
    }

    .dim {
      color: #6b6560;
    }

    /* Cursor */
    .cursor {
      display: inline-block;
      width: 2px;
      height: 1em;
      background: #e8e4df;
      margin-left: 4px;
      animation: blink 1s infinite;
      vertical-align: text-bottom;
      opacity: 0;
    }

    .cursor.active {
      opacity: 1;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    /* Subtle grain overlay */
    .grain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%' height='100%' filter='url(%23noise)'/%3E%3C/svg%3E");
    }

    /* App icon placeholder */
    .app-icon {
      width: 80px;
      height: 80px;
      border-radius: 18px;
      background: linear-gradient(135deg, #1a1917 0%, #2a2825 100%);
      border: 1px solid #333;
      margin-bottom: 40px;
      opacity: 0;
      transform: scale(0.8);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .app-icon.visible {
      opacity: 1;
      transform: scale(1);
    }

    .app-icon svg {
      width: 40px;
      height: 40px;
      stroke: #e8e4df;
      stroke-width: 1.5;
      fill: none;
    }

    /* Final CTA */
    .cta {
      position: absolute;
      bottom: 80px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
      text-align: center;
    }

    .cta.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .cta-text {
      font-size: 14px;
      color: #6b6560;
      letter-spacing: 0.1em;
      text-transform: lowercase;
    }

    .app-store {
      margin-top: 16px;
      padding: 12px 28px;
      background: #e8e4df;
      color: #0a0a0a;
      border-radius: 30px;
      font-size: 14px;
      font-weight: 300;
      letter-spacing: 0.02em;
      display: inline-block;
    }

    /* Floating elements */
    .float-element {
      position: absolute;
      opacity: 0;
      transition: opacity 1s ease-out;
    }

    .float-element.visible {
      opacity: 0.1;
    }

    .receipt-line {
      width: 120px;
      height: 1px;
      background: linear-gradient(90deg, transparent, #e8e4df, transparent);
    }

    .dot {
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: #e8e4df;
    }
  </style>
</head>
<body>
  <div class="grain"></div>

  <!-- Floating decorative elements -->
  <div class="float-element receipt-line" style="top: 20%; left: 10%;"></div>
  <div class="float-element receipt-line" style="top: 75%; right: 15%;"></div>
  <div class="float-element dot" style="top: 30%; right: 20%;"></div>
  <div class="float-element dot" style="bottom: 25%; left: 18%;"></div>

  <div class="container">
    <!-- App Icon -->
    <div class="app-icon" id="appIcon">
      <svg viewBox="0 0 24 24">
        <path d="M4 4h16v16H4z" stroke-linecap="round" stroke-linejoin="round"/>
        <line x1="4" y1="9" x2="20" y2="9"/>
        <line x1="9" y1="4" x2="9" y2="20"/>
      </svg>
    </div>

    <!-- Typography lines -->
    <div class="line" id="line1"></div>
    <div class="line" id="line2"></div>
    <div class="line" id="line3"></div>
    <div class="line" id="line4"></div>
    <div class="line" id="line5"></div>

    <!-- CTA -->
    <div class="cta" id="cta">
      <div class="cta-text">available now</div>
      <div class="app-store">download free</div>
    </div>
  </div>

  <script>
    // Audio context for subtle type sounds
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    let audioCtx = null;

    function initAudio() {
      if (!audioCtx) {
        audioCtx = new AudioContext();
      }
    }

    function playTypeSound() {
      if (!audioCtx) return;

      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();

      // Subtle, soft click sound
      oscillator.type = 'sine';
      oscillator.frequency.setValueAtTime(800 + Math.random() * 400, audioCtx.currentTime);

      gainNode.gain.setValueAtTime(0.03, audioCtx.currentTime);
      gainNode.gain.exponentialDecayTo = (value, time) => {
        gainNode.gain.setTargetAtTime(value, audioCtx.currentTime, time);
      };
      gainNode.gain.setTargetAtTime(0.001, audioCtx.currentTime, 0.02);

      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      oscillator.start(audioCtx.currentTime);
      oscillator.stop(audioCtx.currentTime + 0.05);
    }

    // Content for the video
    const content = [
      { id: 'line1', words: ['split', 'bills.'], classes: ['', 'dim'] },
      { id: 'line2', words: ['not', 'friendships.'], classes: ['dim', 'highlight'] },
      { id: 'line3', words: [], classes: [], delay: 800 },
      { id: 'line4', words: ['scan.', 'tap.', 'done.'], classes: ['', 'accent', ''] },
      { id: 'line5', words: ['splitsy'], classes: ['highlight'], isTitle: true },
    ];

    let currentLine = 0;
    let currentWord = 0;
    let cursor = null;

    function createWords(lineId, words, classes) {
      const line = document.getElementById(lineId);
      line.innerHTML = '';

      words.forEach((word, i) => {
        const span = document.createElement('span');
        span.className = `word ${classes[i] || ''}`;
        span.textContent = word + (i < words.length - 1 ? '\u00A0' : '');
        line.appendChild(span);
      });

      // Add cursor
      cursor = document.createElement('span');
      cursor.className = 'cursor';
      line.appendChild(cursor);
    }

    async function typeWord(lineElement, wordIndex) {
      const words = lineElement.querySelectorAll('.word');
      if (wordIndex < words.length) {
        cursor.classList.add('active');

        // Small delay before typing
        await sleep(100);

        playTypeSound();
        words[wordIndex].classList.add('typed');

        // Move cursor
        if (wordIndex < words.length - 1) {
          await sleep(300 + Math.random() * 200);
          return typeWord(lineElement, wordIndex + 1);
        } else {
          await sleep(200);
          cursor.classList.remove('active');
        }
      }
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function animateLine(lineData) {
      const line = document.getElementById(lineData.id);

      if (lineData.words.length === 0) {
        await sleep(lineData.delay || 500);
        return;
      }

      createWords(lineData.id, lineData.words, lineData.classes);
      line.classList.add('visible');

      await sleep(200);
      await typeWord(line, 0);
      await sleep(600);
    }

    async function runAnimation() {
      // Initialize audio on first interaction
      document.addEventListener('click', initAudio, { once: true });
      initAudio();

      await sleep(800);

      // Show app icon
      document.getElementById('appIcon').classList.add('visible');
      await sleep(1000);

      // Show floating elements
      document.querySelectorAll('.float-element').forEach((el, i) => {
        setTimeout(() => el.classList.add('visible'), i * 200);
      });

      await sleep(500);

      // Animate each line
      for (const lineData of content) {
        await animateLine(lineData);
      }

      await sleep(800);

      // Show CTA
      document.getElementById('cta').classList.add('visible');
    }

    // Start animation
    runAnimation();

    // Restart on click (for testing)
    document.addEventListener('dblclick', () => {
      location.reload();
    });
  </script>
</body>
</html>
